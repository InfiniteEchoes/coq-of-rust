(* Generated by coq-of-rust *)
Require Import Coq.Strings.String.
Require Import Coq.ZArith.ZArith.
Local Open Scope Z.

(* Approximation *)

Definition u8 : Set := Z.
Definition u16 : Set := Z.
Definition u32 : Set := Z.
Definition u64 : Set := Z.
Definition u128 : Set := Z.

Definition i8 : Set := Z.
Definition i16 : Set := Z.
Definition i32 : Set := Z.
Definition i64 : Set := Z.
Definition i128 : Set := Z.

Definition f32 : Set := Z.
Definition f64 : Set := Z.

Definition increase (_ : unit) :=
  _crate.io._print
    (_crate::fmt::ImplArguments.new_v1
      ["";"\n"]
      [_crate::fmt::ImplArgumentV1.new_display (add number 1)]) ;;
  tt ;;
  tt.

Definition decrease (_ : unit) :=
  _crate.io._print
    (_crate::fmt::ImplArguments.new_v1
      ["";"\n"]
      [_crate::fmt::ImplArgumentV1.new_display (sub number 1)]) ;;
  tt ;;
  tt.

Definition help (_ : unit) :=
  _crate.io._print
    (_crate::fmt::ImplArguments.new_v1
      ["usage:\nmatch_args <string>\n    Check whether given string is the answer.\nmatch_args {increase|decrease} <integer>\n    Increase or decrease given integer by one.\n"]
      []) ;;
  tt ;;
  tt.

Definition main (_ : unit) :=
  let args := collect (env.args tt) in
  match len args with
  | Int(1, Unsuffixed) =>
    _crate.io._print
      (_crate::fmt::ImplArguments.new_v1
        ["My name is 'match_args'. Try passing some arguments!\n"]
        []) ;;
    tt ;;
    tt
  | Int(2, Unsuffixed) =>
    match parse args[1] with
    | Ok (Int(42, Unsuffixed)) =>
      _crate.io._print
        (_crate::fmt::ImplArguments.new_v1 ["This is the answer!\n"] []) ;;
      tt
    | _ =>
      _crate.io._print
        (_crate::fmt::ImplArguments.new_v1 ["This is not the answer.\n"] []) ;;
      tt
    end
  | Int(3, Unsuffixed) =>
    let cmd := args[1] in
    let num := args[2] in
    let number := match parse num with
    | Ok (n) => n
    | Err (_) =>
      _crate.io._eprint
        (_crate::fmt::ImplArguments.new_v1
          ["error: second argument not an integer\n"]
          []) ;;
      tt ;;
      help tt ;;
      Return tt ;;
      tt
    end in
    match cmd[{|  |}] with
    | Str("increase", Cooked) => increase number
    | Str("decrease", Cooked) => decrease number
    | _ =>
      _crate.io._eprint
        (_crate::fmt::ImplArguments.new_v1 ["error: invalid command\n"] []) ;;
      tt ;;
      help tt ;;
      tt
    end
  | _ =>
    help tt ;;
    tt
  end.