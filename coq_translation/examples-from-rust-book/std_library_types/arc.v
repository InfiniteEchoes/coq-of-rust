(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Import Root.std.prelude.rust_2015.

Module Arc := std.sync.Arc.

Module thread := std.thread.

Module Duration := std.time.Duration.

Definition main (_ : unit) : unit :=
  let apple := ImplArc.new "the same apple" in
  match into_iter {| Range.start := 0; Range.end := 10; |} with
  | iter =>
    loop
      match next iter with
      | {|  |} => Break
      | {| Some.0 := _; |} =>
        let apple := ImplArc.clone apple in
        thread.spawn
          (fun  =>
            _crate.io._print
              (_crate.fmt.ImplArguments.new_v1
                [ ""; "\n" ]
                [ _crate.fmt.ImplArgumentV1.new_debug apple ]) ;;
            tt ;;
            tt) ;;
        tt
      end ;;
      tt
      from
      for
  end ;;
  thread.sleep (ImplDuration.from_secs 1) ;;
  tt.
