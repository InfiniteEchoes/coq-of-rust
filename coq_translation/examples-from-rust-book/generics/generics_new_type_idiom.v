(* Generated by coq-of-rust *)
Require Import CoqOfRust.CoqOfRust.

Import Root.std.prelude.rust_2015.

Module Years.
  Inductive t : Set := Build (_ : i64).
  
  Global Instance Get_0 : IndexedField.Class t 0 _ := {|
    IndexedField.get '(Build x0) := x0;
  |}.
End Years.
Definition Years := Years.t.

Module Days.
  Inductive t : Set := Build (_ : i64).
  
  Global Instance Get_0 : IndexedField.Class t 0 _ := {|
    IndexedField.get '(Build x0) := x0;
  |}.
End Days.
Definition Days := Days.t.

Module ImplYears.
  Definition Self := Years.
  
  Definition to_days (self : ref Self) : Days :=
    Days.Build (mul (IndexedField.get (index := 0) self) 365).
  
  Global Instance AF_to_days : Years.AssociatedFunction "to_days" _ := {|
    Years.associated_function := to_days;
  |}.
  Global Instance M_to_days : Method "to_days" _ := {|
    method := to_days;
  |}.
End ImplYears.

Module ImplDays.
  Definition Self := Days.
  
  Definition to_years (self : ref Self) : Years :=
    Years.Build (div (IndexedField.get (index := 0) self) 365).
  
  Global Instance AF_to_years : Days.AssociatedFunction "to_years" _ := {|
    Days.associated_function := to_years;
  |}.
  Global Instance M_to_years : Method "to_years" _ := {|
    method := to_years;
  |}.
End ImplDays.

Definition old_enough (age : ref Years) : bool :=
  ge (IndexedField.get (index := 0) age) 18.

Definition main (_ : unit) : unit :=
  let age := Years.Build 5 in
  let age_days := method "to_days" age in
  _crate.io._print
    (_crate.fmt.ImplArguments.new_v1
      [ "Old enough "; "\n" ]
      [ _crate.fmt.ImplArgumentV1.new_display (old_enough age) ]) ;;
  tt ;;
  _crate.io._print
    (_crate.fmt.ImplArguments.new_v1
      [ "Old enough "; "\n" ]
      [
        _crate.fmt.ImplArgumentV1.new_display
          (old_enough (method "to_years" age_days))
      ]) ;;
  tt ;;
  tt.
